<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Hazelcast Documentation Version: Not-Needed</title>

    <link type="text/css" rel="stylesheet" href="assets/css/reset.css">
    <link type="text/css" rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/github.min.css">
    <link type="text/css" rel="stylesheet" href="assets/css/docs.css">
    <link type="text/css" rel="stylesheet" href="assets/css/print.css" media="print">
    

    <script type="text/javascript" src="assets/js/jquery-1.10.1.min.js"></script>
    <script type="text/javascript" src="assets/js/jquery.sticky-kit.js"></script>
    <script type="text/javascript" src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
    <script type="text/javascript" src="assets/js/lunr.min.js"></script>

    

    <script type="text/javascript">var BASE_URL = "";</script>
    <script type="text/javascript" src="assets/js/viewer.js"></script>
    <script type="text/javascript" src="assets/js/toc.scroll.js"></script>

    <script type="text/javascript">
  	$(function(){
		$("#sidebar").stick_in_parent()
	});
    </script>
    <script type="text/javascript">

        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-3921306-1']);
        _gaq.push(['_setDomainName', 'hazelcast.com']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

    </script>
    <script type="text/javascript">
        setTimeout(function(){var a=document.createElement("script");
            var b=document.getElementsByTagName("script")[0];
            a.src=document.location.protocol+"//dnn506yrbagrg.cloudfront.net/pages/scripts/0020/7413.js?"+Math.floor(new Date().getTime()/3600000);
            a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
    </script>

</head>
<body>
    <div id="page">
        <a name="top" />
         <div id="sitebar">
    <div class="content">
      <p><a href="http://hazelcast.org/documentation">Go to <span style="font-weight:bold">hazelcast.org/documentation</span></a></p>
      </div>
  </div>

        <header id="header">
			<div class="content">
			<div style="overflow:hidden">
				<div style="float:left">
                    <a href="http://www.hazelcast.org"><img src="assets/img/logo.png" style="width: 199px;padding-top: 18px"/></a>
					
				</div>	
				<div style="float:left;padding-top: 15px;padding-left: 30px;">
<h1><a href="">Documentation <span style="font-size:12px"> Version: Not-Needed - Publication Date : Mar 10, 2016 </span></a></h1>
				</div>
			</div>
			</div>
        </header>
        <div class="content" style="width:1200px; margin: 0 auto">
	        

	<div id="sidebar" style="overflow-y:auto">
	    <form action="search.html"><input id="search" type="text" placeholder="Search" name="q" /></form>
	    <nav id="toc">
	        
    <ol>
    
        <li>
            <a href="3-6-1.html">3.6.1</a>
            
        </li>
    
        <li>
            <a href="3-6.html">3.6</a>
            
        </li>
    
        <li>
            <a href="3-5-5.html">3.5.5</a>
            
        </li>
    
        <li>
            <a href="3-5-4.html">3.5.4</a>
            
        </li>
    
        <li>
            <a href="3-5-3.html">3.5.3</a>
            
        </li>
    
        <li>
            <a href="3-5-2.html">3.5.2</a>
            
        </li>
    
        <li>
            <a href="3-5-1.html">3.5.1</a>
            
        </li>
    
        <li>
            <a href="3-5.html">3.5</a>
            
        </li>
    
        <li>
            <a href="3-4-4.html">3.4.4</a>
            
        </li>
    
        <li>
            <a href="3-4-3.html">3.4.3</a>
            
        </li>
    
        <li>
            <a href="3-4-2.html">3.4.2</a>
            
        </li>
    
        <li>
            <a href="3-4-1.html">3.4.1</a>
            
        </li>
    
        <li>
            <a href="3-4.html">3.4</a>
            
        </li>
    
        <li>
            <a href="3-3-5.html">3.3.5</a>
            
        </li>
    
        <li>
            <a href="3-3-4.html">3.3.4</a>
            
        </li>
    
        <li>
            <a href="3-3-3.html">3.3.3</a>
            
        </li>
    
        <li>
            <a href="3-3-2.html">3.3.2</a>
            
        </li>
    
        <li>
            <a href="3-3-1.html">3.3.1</a>
            
        </li>
    
        <li>
            <a href="3-3.html">3.3</a>
            
        </li>
    
        <li>
            <a href="3-2-6.html">3.2.6</a>
            
        </li>
    
        <li>
            <a href="3-2-5.html">3.2.5</a>
            
        </li>
    
        <li>
            <a href="3-2-4.html">3.2.4</a>
            
        </li>
    
        <li>
            <a href="3-2-3.html">3.2.3</a>
            
        </li>
    
        <li>
            <a href="3-2-2.html">3.2.2</a>
            
        </li>
    
        <li>
            <a href="3-2-1.html">3.2.1</a>
            
        </li>
    
        <li>
            <a href="3-2.html">3.2</a>
            
        </li>
    
        <li>
            <a href="3-1-8.html">3.1.8</a>
            
        </li>
    
        <li>
            <a href="3-0-3.html">3.0.3</a>
            
        </li>
    
        <li>
            <a href="upgradingfrom3x.html">Upgrading from 3.x</a>
            
        </li>
    
        <li>
            <a href="upgradingfrom2x.html">Upgrading from 2.x</a>
            
        </li>
    
</ol>

	    </nav>
	    
	    <nav id="links">
	        <ul>
	            
	        </ul>
	    </nav>
	    
		<div id="copyright">
			Powered by <a href="http://github.com/maximebf/beautiful-docs">beautiful-docs</a> -
	        <a href="#top">Back to top</a>
		</div>
	
	</div>

	        <div id="content">
	            <a name="upgrading-from-2x"></a><h1 id="upgrading-from-2-x">Upgrading from 2.x</h1>
<ul>
<li><strong>Removal of deprecated static methods:</strong>
The static methods of Hazelcast class reaching Hazelcast data components have been removed. The functionality of these methods can be reached from HazelcastInstance interface. Namely you should replace following:</li>
</ul>
<pre><code class="lang-java">Map&lt;Integer, String&gt; customers = Hazelcast.getMap( &quot;customers&quot; );
</code></pre>
<p>with</p>
<pre><code class="lang-java">HazelcastInstance hazelcastInstance = Hazelcast.newHazelcastInstance();
// or if you already started an instance named &quot;instance1&quot;
// HazelcastInstance hazelcastInstance = Hazelcast.getHazelcastInstanceByName( &quot;instance1&quot; );
Map&lt;Integer, String&gt; customers = hazelcastInstance.getMap( &quot;customers&quot; );
</code></pre>
<ul>
<li><strong>Renaming &quot;instance&quot; to &quot;distributed object&quot;:</strong>
Before 3.0 there was a confusion for the term &quot;instance&quot;. It was used for both the cluster members and the distributed objects (map, queue, topic, etc. instances). Starting 3.0, the term instance will be only used for Hazelcast instances, namely cluster members. We will use the term &quot;distributed object&quot; for map, queue, etc. instances. So you should replace the related methods with the new renamed ones. As 3.0 clients are smart client that they know in which node the data is located, you can replace your lite members with native clients.</li>
</ul>
<pre><code class="lang-java">public static void main( String[] args ) throws InterruptedException {
  HazelcastInstance hazelcastInstance = Hazelcast.newHazelcastInstance();
  IMap map = hazelcastInstance.getMap( &quot;test&quot; );
  Collection&lt;Instance&gt; instances = hazelcastInstance.getInstances();
  for ( Instance instance : instances ) {
    if ( instance.getInstanceType() == Instance.InstanceType.MAP ) {
      System.out.println( &quot;There is a map with name: &quot; + instance.getId() );
    }
  }
}
</code></pre>
<p>with</p>
<pre><code class="lang-java">public static void main( String[] args ) throws InterruptedException {
  HazelcastInstance hazelcastInstance = Hazelcast.newHazelcastInstance();
  IMap map = hz.getMap( &quot;test&quot; );
  Collection&lt;DistributedObject&gt; objects = hazelcastInstance.getDistributedObjects();
  for ( DistributedObject distributedObject : objects ) {
    if ( distributedObject instanceof IMap ) {
      System.out.println( &quot;There is a map with name: &quot; + distributedObject.getName() );
    }
  }
}
</code></pre>
<ul>
<li><strong>Package structure change:</strong>
PartitionService has been moved to package <code>com.hazelcast.core</code> from <code>com.hazelcast.partition</code>.</li>
</ul>
<ul>
<li><strong>Listener API change:</strong>
Before 3.0, <code>removeListener</code> methods was taking the Listener object as parameter. But, it causes confusion as same listener object may be used as parameter for different listener registrations. So we have changed the listener API. <code>addListener</code> methods return you an unique ID and you can remove listener by using this ID. So you should do following replacement if needed:</li>
</ul>
<pre><code class="lang-java">IMap map = hazelcastInstance.getMap( &quot;map&quot; );
map.addEntryListener( listener, true );
map.removeEntryListener( listener );
</code></pre>
<p>with</p>
<pre><code class="lang-java">IMap map = hazelcastInstance.getMap( &quot;map&quot; );
String listenerId = map.addEntryListener( listener, true );
map.removeEntryListener( listenerId );
</code></pre>
<ul>
<li><strong>IMap changes:</strong></li>
<li><code>tryRemove(K key, long timeout, TimeUnit timeunit)</code> returns boolean indicating whether operation is successful.</li>
<li><code>tryLockAndGet(K key, long time, TimeUnit timeunit)</code> is removed.</li>
<li><code>putAndUnlock(K key, V value)</code> is removed.</li>
<li><code>lockMap(long time, TimeUnit timeunit)</code> and <code>unlockMap()</code> are removed.</li>
<li><code>getMapEntry(K key)</code> is renamed as <code>getEntryView(K key)</code>. The returned object&#39;s type, MapEntry class is renamed as EntryView.</li>
<li>There is no predefined names for merge policies. You just give the full class name of the merge policy implementation.</li>
</ul>
<pre><code class="lang-xml">&lt;merge-policy&gt;com.hazelcast.map.merge.PassThroughMergePolicy&lt;/merge-policy&gt;
</code></pre>
<p>Also MergePolicy interface has been renamed to MapMergePolicy and also returning null from the implemented <code>merge()</code> method causes the existing entry to be removed.</p>
<ul>
<li><strong>IQueue changes:</strong>
There is no change on IQueue API but there are changes on how <code>IQueue</code> is configured. With Hazelcast 3.0 there will not be backing map configuration for queue. Settings like backup count will be directly configured on queue config. For queue configuration details, please see the <a href="#queue">Queue section</a>.</li>
<li><strong>Transaction API change:</strong>
In Hazelcast 3.0, transaction API is completely different. Please see the <a href="#transactions">Transactions chapter</a>.</li>
<li><strong>ExecutorService API change:</strong>
Classes MultiTask and DistributedTask have been removed. All the functionality is supported by the newly presented interface IExecutorService. Please see the <a href="#executor-service">Executor Service section</a>.</li>
<li><strong>LifeCycleService API:</strong>
The lifecycle has been simplified. <code>pause()</code>, <code>resume()</code>, <code>restart()</code> methods have been removed.</li>
<li><strong>AtomicNumber:</strong>
<code>AtomicNumber</code> class has been renamed to <code>IAtomicLong</code>.</li>
<li><strong>ICountDownLatch:</strong>
<code>await()</code> operation has been removed. We expect users to use <code>await()</code> method with timeout parameters.</li>
<li><strong>ISemaphore API:</strong>
The <code>ISemaphore</code> has been substantially changed. <code>attach()</code>, <code>detach()</code> methods have been removed.</li>
<li>In 2.x releases, the default value for <code>max-size</code> eviction policy was <strong>cluster_wide_map_size</strong>. In 3.x releases, default is <strong>PER_NODE</strong>. After upgrading, the <code>max-size</code> should be set according to this new default, if it is not changed. Otherwise, it is likely that OutOfMemory exception may be thrown.</li>
</ul>




	        </div>
	        </div>			
    </div>
</body>
</html>
